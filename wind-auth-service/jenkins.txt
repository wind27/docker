https://github.com/wind27/wind-auth-service.git



-U
clean
package
dependency:copy-dependencies




mkdir -p /opt/server/wind-auth-service/lib
mkdir -p /opt/server/wind-auth-service/conf
mkdir -p /opt/server/wind-auth-service/bin
rm -rf /opt/server/wind-auth-service/lib/*
rm -rf /opt/server/wind-auth-service/conf/*
rm -rf /opt/server/wind-auth-service/bin/*
cp -ra /opt/workspace/wind-auth-service/dependency/* /opt/server/wind-auth-service/lib
cp -ra /opt/workspace/wind-auth-service/wind-auth-service-0.0.1-SNAPSHOT.jar /opt/server/wind-auth-service/lib
cp -ra /opt/workspace/wind-auth-service/classes/*.yml /opt/server/wind-auth-service/conf
cp -ra /opt/workspace/wind-auth-service/classes/*.xml /opt/server/wind-auth-service/conf
cp -ra /opt/workspace/wind-auth-service/classes/META-INF /opt/server/wind-auth-service/conf
cp -ra /opt/workspace/wind-auth-service/classes/spring /opt/server/wind-auth-service/conf
cp -ra /opt/workspace/wind-auth-service/classes/*.properties /opt/server/wind-auth-service/conf



pid=`ps -efww|grep -w 'wind-auth-service'|grep -v grep|cut -c 9-15`
if [ $pid ]; then
	kill -9 $pid
	echo "kill pid : $pid"
fi
java -Ddev=DEV -Ddev_meta=http://apollo:8080 -jar /opt/server/wind-auth-service/lib/wind-auth-service-0.0.1-SNAPSHOT.jar